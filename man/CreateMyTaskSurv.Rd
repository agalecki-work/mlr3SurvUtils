% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/CreateMyTaskSurv.R
\name{CreateMyTaskSurv}
\alias{CreateMyTaskSurv}
\title{Create a Survival Task for mlr3}
\usage{
CreateMyTaskSurv(data, target_info, backend_info, traceon = FALSE)
}
\arguments{
\item{data}{A data frame containing survival data.}

\item{target_info}{A named character vector with keys:
\itemize{
\item \code{id}: String identifier for the task (e.g., "test1").
\item \code{time}: Name of the survival time column in \code{data}.
\item \code{event}: Name of the event status column in \code{data}.
\item \code{type}: Survival type, either \code{"right"} (right-censored) or \code{"mstate"} (multi-state).
}}

\item{backend_info}{A list with backend configuration:
\itemize{
\item \code{id}: String identifier for the backend dataset (e.g., "ovarian_test").
\item \code{primary_key}: Column name for unique numeric identifiers in \code{data}.
\item \code{feature_cols}: Vector of column names to use as predictor features.
\item \code{filter}: Optional string condition to subset \code{data} (e.g., "age <= 65").
\item \code{time_cutoff}: Optional numeric value to truncate survival times.
\item \code{add_to_strata_cols}: Optional column name for stratification in \code{mlr3}.
\item \code{weight_col}: Optional column name for weights in \code{data}.
}}

\item{traceon}{Logical, if \code{TRUE} enables debug tracing messages. Default is \code{FALSE}.}
}
\value{
An object of class \code{mlr3proba::TaskSurv} configured with the specified parameters.
}
\description{
Creates a survival task (\code{TaskSurv}) for use with the \code{mlr3} framework, supporting both right-censored
and multi-state survival analysis. Applies filtering, time cutoffs, and role assignments based on
provided configurations.
}
\details{
This function processes survival data by applying filters and time cutoffs (via \code{apply_time_cutoff}),
then constructs an \code{mlr3} survival task with appropriate roles for features, weights, and strata.
The \code{primary_key} must be numeric. The resulting task label includes dataset, type, filter, and
cutoff information for clarity.
}
\examples{
library(mlr3)
library(mlr3proba)
library(survival)
library(data.table)

# Prepare data
ovarian_dt <- as.data.table(ovarian)
ovarian_dt[, id := .I]
ovarian_dt[, weights := runif(.N)]

# Define configurations
target_info <- c(id = "test1", time = "futime", event = "fustat", type = "right")
backend_info <- list(
  id = "ovarian_test",
  primary_key = "id",
  feature_cols = c("age", "resid.ds", "ecog.ps"),
  filter = "age <= 65",
  time_cutoff = 500,
  add_to_strata_cols = "rx",
  weight_col = "weights"
)

# Create task
task <- CreateMyTaskSurv(ovarian_dt, target_info, backend_info)
print(task)

}
